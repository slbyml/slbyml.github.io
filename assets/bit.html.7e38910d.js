import{_ as p,r as t,o,c,a as n,b as l,e as a,d as s}from"./app.fded88d1.js";const i={},u=a(`<h1 id="\u4E8C\u8FDB\u5236\u4E4B\u5165\u95E8\u5230\u5E94\u7528\u5B9E\u8DF5" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u8FDB\u5236\u4E4B\u5165\u95E8\u5230\u5E94\u7528\u5B9E\u8DF5" aria-hidden="true">#</a> \u4E8C\u8FDB\u5236\u4E4B\u5165\u95E8\u5230\u5E94\u7528\u5B9E\u8DF5</h1><h2 id="\u524D\u8A00" tabindex="-1"><a class="header-anchor" href="#\u524D\u8A00" aria-hidden="true">#</a> \u524D\u8A00</h2><p>\u8BA1\u7B97\u673A\u5185\u90E8\u662F\u4E00\u4E2A\u75310\u548C1\u7EC4\u6210\u7684\u4E8C\u8FDB\u5236\u4E16\u754C\uFF0C\u6211\u4EEC\u6240\u6709\u7684\u64CD\u4F5C\u6700\u7EC8\u90FD\u4F1A\u8F6C\u6362\u6210\u4E8C\u8FDB\u5236\u8FDB\u884C\u8FD0\u7B97\u548C\u5B58\u50A8\uFF0C\u8FD9\u662F\u56E0\u4E3A\u5728\u7535\u5B50\u8BA1\u7B97\u673A\u51FA\u73B0\u65F6\uFF0C\u662F\u4F7F\u7528\u7535\u5B50\u7BA1\u6765\u8FDB\u884C\u72B6\u6001\u7BA1\u7406\u7684\uFF0C\u800C\u5B83\u4E5F\u5C31\u53EA\u6709\u201C<code>\u5F00</code>\u201D\u548C\u201C<code>\u5173</code>\u201D\uFF08\u901A\u3001\u65AD\u7535\uFF09\u8FD9\u4E24\u79CD\u6700\u57FA\u672C\u7684\u72B6\u6001\uFF0C\u8FD9\u4E5F\u5C31\u51B3\u5B9A\u4E86\u8BA1\u7B97\u673A\u7528\u4E8C\u8FDB\u5236\u6765\u8868\u8FF0\u6570\u5B57\u548C\u6570\u636E\u662F\u6700\u5BB9\u6613\u5B9E\u73B0\u7684\uFF0C\u800C\u5B83\u7684\u901A\u7528\u6027\u5728\u79D1\u6280\u5982\u6B64\u53D1\u8FBE\u7684\u4ECA\u5929\u4F9D\u7136\u65E0\u6CD5\u88AB\u66FF\u4EE3\u3002<br> \u4E8C\u8FDB\u5236\u6570\u636E\u662F\u7528<code>0</code>\u548C<code>1</code>\u4E24\u4E2A\u6570\u7801\u6765\u8868\u793A\u7684\u6570\u3002\u5B83\u7684\u57FA\u6570\u4E3A2\uFF0C\u8FDB\u4F4D\u89C4\u5219\u662F\u201C<code>\u9022\u4E8C\u8FDB\u4E00</code>\u201D\uFF0C\u501F\u4F4D\u89C4\u5219\u662F\u201C<code>\u501F\u4E00\u5F53\u4E8C</code>\u201D</p><h2 id="\u6709\u8DA3\u7684\u7279\u5F81" tabindex="-1"><a class="header-anchor" href="#\u6709\u8DA3\u7684\u7279\u5F81" aria-hidden="true">#</a> \u6709\u8DA3\u7684\u7279\u5F81</h2><ul><li>\u5982\u679C\u4E00\u4E2A\u4E8C\u8FDB\u5236\u7B2C\u96F6\u4F4D\uFF08\u6700\u53F3\u4FA7\uFF09\u7684\u503C\u4E3A1\uFF0C\u5219\u8FD9\u4E2A\u6570\u4E00\u5B9A\u662F\u4E2A\u5947\u6570\uFF1B\u800C\u5982\u679C\u8BE5\u4F4D\u662F0\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u6570\u5C31\u662F\u5076\u6570</li><li>2\u207F-1\u8F6C\u6362\u6210\u4E8C\u8FDB\u5236\u662Fn\u4E2A1\uFF1B\u4F8B\uFF1A<code>2\xB3 = 7(\u5341\u8FDB\u5236) = 111\uFF08\u4E8C\u8FDB\u5236\uFF09</code></li><li>\u5C06\u4E00\u4E2A\u4E8C\u8FDB\u5236\u6570\u7684\u6240\u6709\u4F4D\u5DE6\u79FB1\u4F4D\u7684\u7ED3\u679C\u662F\u5C06\u8BE5\u6570\u4E58\u4EE5\u4E8C\uFF1B\u4F8B\uFF1A<code>7&lt;&lt;1\u7B49\u4E8E14\uFF1B7\u7684\u4E8C\u8FDB\u5236\u4E3A111\uFF0C\u79FB\u4F4D\u540E\u4E3A1110=14</code></li></ul><h2 id="\u8FDB\u5236\u95F4\u7684\u8F6C\u6362" tabindex="-1"><a class="header-anchor" href="#\u8FDB\u5236\u95F4\u7684\u8F6C\u6362" aria-hidden="true">#</a> \u8FDB\u5236\u95F4\u7684\u8F6C\u6362</h2><h3 id="\u6B63\u6570\u95F4\u7684\u8F6C\u6362" tabindex="-1"><a class="header-anchor" href="#\u6B63\u6570\u95F4\u7684\u8F6C\u6362" aria-hidden="true">#</a> \u6B63\u6570\u95F4\u7684\u8F6C\u6362</h3><ul><li>\u5341\u8FDB\u5236\u8F6C\u4E8C\u8FDB\u5236\uFF1A\u96642\u53D6\u4F59\uFF0C\u9006\u5E8F\u6392\u5217</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>57 % 2 = 28 \u4F59 1
28 % 2 = 14 \u4F59 0
14 % 2 = 7  \u4F59 0
 7 % 2 = 3  \u4F59 1
 3 % 2 = 1  \u4F59 1
 1 % 2 = 0  \u4F59 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C\u4E3A\uFF08\u5012\u53D6\uFF09\uFF1A<code>111001</code></p><ul><li>\u4E8C\u8FDB\u5236\u8F6C\u5341\u8FDB\u5236\uFF1A\u53D6\u4E0D\u4E3A0\u7684\u4F4D\u7F6E\u5E8F\u53F7\u4F5C\u4E3A2\u7684\u6B21\u65B9\u8FDB\u884C\u8BA1\u7B97\uFF0C\u5E76\u5C06\u7ED3\u679C\u8FDB\u884C\u76F8\u52A0</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 111001</span>
Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">57</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5C0F\u6570\u95F4\u7684\u8F6C\u6362" tabindex="-1"><a class="header-anchor" href="#\u5C0F\u6570\u95F4\u7684\u8F6C\u6362" aria-hidden="true">#</a> \u5C0F\u6570\u95F4\u7684\u8F6C\u6362</h3><ul><li>\u5341\u8FDB\u5236\u8F6C\u4E8C\u8FDB\u5236\uFF1A\u4E582\u53D6\u6574\uFF0C\u6B63\u5E8F\u6392\u5217</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>0.375 * 2 = 0.750 \u53D6\u6574 0
0.750 * 2 = 1.500 \u53D6\u6574 1
0.500 * 2 = 1.000 \u53D6\u6574 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C\u4E3A\uFF1A<code>0.011</code></p><ul><li>\u4E8C\u8FDB\u5236\u8F6C\u5341\u8FDB\u5236\uFF1A\u53D6\u5C0F\u6570\u70B9\u540E\u4E0D\u4E3A0\u7684\u4F4D\u7F6E\u5E8F\u53F7\u4F5C\u4E3A2\u7684\u8D1F\u6B21\u65B9\u8FDB\u884C\u8BA1\u7B97\uFF0C\u5E76\u5C06\u7ED3\u679C\u8FDB\u884C\u76F8\u52A0</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 0.011</span>
Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0.375</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u8D1F\u6570\u95F4\u7684\u8F6C\u6362" tabindex="-1"><a class="header-anchor" href="#\u8D1F\u6570\u95F4\u7684\u8F6C\u6362" aria-hidden="true">#</a> \u8D1F\u6570\u95F4\u7684\u8F6C\u6362</h3><p>\u8BF4\u5230\u4E8C\u8FDB\u5236\u8D1F\u6570\u9996\u5148\u8981\u4ECB\u7ECD\u4E09\u4E2A\u540D\u8BCD\uFF1A<code>\u539F\u7801</code>\u3001<code>\u53CD\u7801</code>\u3001<code>\u8865\u7801</code>\uFF0C\u56E0\u4E3A\u5728\u8BA1\u7B97\u673A\u5185\u90E8\uFF0C\u8D1F\u6570\u662F\u4EE5\u8865\u7801\u7684\u5F62\u5F0F\u5B58\u5728\u7684</p><blockquote><p>\u539F\u7801\uFF1A\u6B63\u6570\u7684\u539F\u7801\u4E3A\u5176\u7EDD\u5BF9\u503C\u8F6C\u4E8C\u8FDB\u5236\uFF1B\u8D1F\u6570\u7684\u539F\u7801\u4E3A\u5176\u7EDD\u5BF9\u503C\u8F6C\u4E8C\u8FDB\u5236\u7136\u540E\u6700\u9AD8\u4F4D\u88651 \u53CD\u7801\uFF1A\u6B63\u6570\u7684\u53CD\u7801\u548C\u539F\u7801\u4E00\u81F3\uFF1B\u8D1F\u6570\u7684\u53CD\u7801\u4E3A\u5176\u539F\u7801\u9664\u7B26\u53F7\u4F4D\u5916\u5404\u4F4D\u53D6\u53CD \u8865\u7801\uFF1A\u6B63\u6570\u7684\u8865\u7801\u548C\u539F\u7801\u4E00\u81F3\uFF1B\u8D1F\u6570\u7684\u53CD\u7801\u4E3A\u5176\u539F\u7801\u9664\u7B26\u53F7\u4F4D\u5916\u5404\u4F4D\u53D6\u53CD\uFF0C\u7136\u540E\u518D\u52A01</p></blockquote><ul><li>\u5341\u8FDB\u5236\u8F6C\u4E8C\u8FDB\u5236\uFF08\u516B\u8FDB\u5236\u4E3A\u4F8B\uFF09\uFF1A <ul><li>-57\u7684\u7EDD\u5BF9\u503C\u8F6C\u4E8C\u8FDB\u5236\uFF1A111001</li><li>\u6700\u9AD8\u4F4D\u88651\uFF1A10111001</li><li>\u5904\u7B26\u53F7\u4F4D\u53D6\u53CD\uFF1A11000110</li><li>\u6700\u9AD8\u4F4D\u52A01\uFF1A11000111 \u7ED3\u679C\u4E3A\uFF1A<code>11000111</code></li></ul></li><li>\u4E8C\u8FDB\u5236\u8F6C\u5341\u8FDB\u5236\u5219\u8FD4\u56DE\u6765\u7B97\u5C31\u53EF\u4EE5\u4E86</li></ul><h3 id="\u95EE\u9898\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#\u95EE\u9898\u5206\u6790" aria-hidden="true">#</a> \u95EE\u9898\u5206\u6790</h3>`,23),r=s("\u6709\u4E86\u4E0A\u9762\u7684\u77E5\u8BC6\uFF0C\u90A3\u4E48"),d=n("code",null,"0.1+0.2 !== 0.3",-1),k=s("\u5C31\u6709\u4E86\u4E00\u4E2A\u6700\u7B80\u5355\u3001\u5BB9\u6613\u7406\u89E3\u7684\u89E3\u91CA\u4E86\uFF1A\u8F6C\u4E8C\u8FDB\u5236\u7B97\u4E0D\u5F00\uFF0C\u4F1A\u51FA\u73B0\u65E0\u9650\u5FAA\u73AF\u90E8\u5206\uFF0C\u6240\u4EE5\u5C31\u4F1A\u7CBE\u5EA6\u4E22\u5931\uFF0C\u5177\u4F53\u53EF\u4EE5\u53C2\u8003 "),m={href:"https://betterprogramming.pub/why-is-0-1-0-2-not-equal-to-0-3-in-most-programming-languages-99432310d476",target:"_blank",rel:"noopener noreferrer"},v=s("\u4E3A\u4EC0\u4E480.1+0.2\u4E0D\u7B49\u4E8E0.3"),b=a(`<h2 id="\u4F4D\u8FD0\u7B97\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#\u4F4D\u8FD0\u7B97\u4ECB\u7ECD" aria-hidden="true">#</a> \u4F4D\u8FD0\u7B97\u4ECB\u7ECD</h2><h3 id="\u903B\u8F91\u4E0E-and-\u64CD\u4F5C\u7B26" tabindex="-1"><a class="header-anchor" href="#\u903B\u8F91\u4E0E-and-\u64CD\u4F5C\u7B26" aria-hidden="true">#</a> \u903B\u8F91\u4E0E\uFF1AAND\uFF0C\u64CD\u4F5C\u7B26\uFF1A<code>&amp;</code></h3><p>\u4E24\u4E2A\u5BF9\u5E94\u7684\u4E8C\u8FDB\u5236\u4F4D\u90FD\u4E3A1\u65F6\uFF0C\u7ED3\u679C\u4E3A1\uFF1B\u4F8B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    1101   -&gt;  13
AND 1001   -&gt;  9
------------------
    1001   -&gt;  9
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5224\u65AD\u4E00\u4E2A\u6570\u7684\u5947\u5076\u5C31\u53EF\u4EE5\u5E94\u7528\u8FD9\u4E2A\u7279\u6027\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">18</span> <span class="token operator">&amp;</span> <span class="token number">1</span> <span class="token operator">===</span> <span class="token number">1</span> <span class="token comment">// false\uFF0C</span>
<span class="token number">19</span> <span class="token operator">&amp;</span> <span class="token number">1</span> <span class="token operator">===</span> <span class="token number">1</span> <span class="token comment">// true\uFF0C</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u539F\u7406\u5C31\u662F\u56E0\u4E3A\u6240\u6709\u7684\u5947\u6570\u8F6C\u6210\u4E8C\u8FDB\u5236\u540E\u6700\u540E\u4E00\u4F4D\u4E3A1\uFF0C\u800C\u5076\u6570\u6700\u540E\u4E3A0\uFF0C\u5F53\u4ED6\u4EEC\u548C1\u505A\u6309\u4F4D\u4E0E\u64CD\u4F5C\u65F6\uFF0C\u5F97\u5230\u7684\u7ED3\u679C\u53EA\u6709\u201D1\u201C(\u5947\u6570)\u548C\u201D0\u201C(\u5076\u6570)\u4E24\u79CD\u60C5\u51B5</p><h3 id="\u903B\u8F91\u6216-or-\u64CD\u4F5C\u7B26" tabindex="-1"><a class="header-anchor" href="#\u903B\u8F91\u6216-or-\u64CD\u4F5C\u7B26" aria-hidden="true">#</a> \u903B\u8F91\u6216\uFF1AOR\uFF0C\u64CD\u4F5C\u7B26\uFF1A<code>|</code></h3><p>\u4E24\u4E2A\u5BF9\u5E94\u7684\u4E8C\u8FDB\u5236\u4F4D\u6709\u4E00\u4E2A\u4E3A1\u65F6\uFF0C\u7ED3\u679C\u5C31\u4E3A1\uFF1B\u4F8B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>   1101   -&gt;  13
OR 1001   -&gt;  9
------------------
   1101   -&gt;  13
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53D6\u6574\u662F\u5176\u4E2D\u4E00\u79CD\u5E94\u7528\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">toInt</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num <span class="token operator">|</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token number">3.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">// 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token number">2.12345</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u903B\u8F91\u5F02\u6216-xor-\u64CD\u4F5C\u7B26" tabindex="-1"><a class="header-anchor" href="#\u903B\u8F91\u5F02\u6216-xor-\u64CD\u4F5C\u7B26" aria-hidden="true">#</a> \u903B\u8F91\u5F02\u6216\uFF1AXOR\uFF0C\u64CD\u4F5C\u7B26\uFF1A<code>^</code></h3><p>\u4E24\u4E2A\u5BF9\u5E94\u7684\u4E8C\u8FDB\u5236\u4F4D\u76F8\u540C\u4E3A0\uFF0C\u76F8\u5F02\u4E3A1\u4F8B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    1101   -&gt;  13
XOR 1001   -&gt;  9
--------------------
    0100   -&gt;  4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u5E94\u7528\u6B64\u7279\u6027\u5B9E\u73B0\u4E0D\u501F\u52A9\u65B0\u7684\u53D8\u91CF\u6765\u4EA4\u6362\u4E24\u4E2A\u53D8\u91CF\u7684\u503C</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">20</span>
a <span class="token operator">^=</span> b
b <span class="token operator">^=</span> a
a <span class="token operator">^=</span> b
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token comment">// 20,10</span>
<span class="token comment">// 10 = 01010</span>
<span class="token comment">// 20 = 10100</span>
<span class="token comment">// a  = 11110   # a ^ b\u7684\u7ED3\u679C\uFF0C\u5176\u4E2D\u76841\u662F a \u548C b \u4E2D\u4E0D\u540C\u7684\u90E8\u5206 </span>
<span class="token comment">// b  = 01010   # b ^ c\u7684\u7ED3\u679C\uFF0C\u6709\u6CA1\u6709\u53D1\u73B0\u548Ca\u662F\u4E00\u6837\u7684</span>
<span class="token comment">// a  = 10100   # a ^ d\u7684\u7ED3\u679C\uFF0C\u6709\u6CA1\u6709\u53D1\u73B0\u662Fb\u662F\u4E00\u6837\u7684</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u903B\u8F91\u975E-not-\u64CD\u4F5C\u7B26" tabindex="-1"><a class="header-anchor" href="#\u903B\u8F91\u975E-not-\u64CD\u4F5C\u7B26" aria-hidden="true">#</a> \u903B\u8F91\u975E\uFF1ANOT\uFF0C\u64CD\u4F5C\u7B26\uFF1A<code>~</code></h3><p>0\u53D81\uFF0C1\u53D80\uFF1B\u4F8B(\u516B\u4F4D)\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>NOT     1001
-------------
    11110110
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6309\u4F4D\u5DE6\u79FB-shl-\u64CD\u4F5C\u7B26" tabindex="-1"><a class="header-anchor" href="#\u6309\u4F4D\u5DE6\u79FB-shl-\u64CD\u4F5C\u7B26" aria-hidden="true">#</a> \u6309\u4F4D\u5DE6\u79FB\uFF1ASHL\uFF0C\u64CD\u4F5C\u7B26\uFF1A<code>&lt;&lt;</code></h3><p>\u5404\u4E8C\u8FDB\u4F4D\u5168\u90E8\u5DE6\u79FB\u82E5\u5E72\u4F4D\uFF0C\u53F3\u4FA7\u4E22\u5F03\uFF0C\u5DE6\u4FA7\u88650\u4F8B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>         57\uFF1A111001
-------- 57 &lt;&lt; 1 -------
\u8FD0\u7B97\u7ED3\u679C\uFF1A114\uFF1A1110010
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E00\u4E2A\u7B80\u5355\u7684\u4E58\u6CD5\u5C0F\u6280\u5DE7\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>num <span class="token operator">&lt;&lt;</span> <span class="token number">1</span>    <span class="token comment">// num * 2</span>
num <span class="token operator">&lt;&lt;</span> <span class="token number">2</span>    <span class="token comment">// num * 4</span>
num <span class="token operator">&lt;&lt;</span> <span class="token number">3</span>    <span class="token comment">// num * 8</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6309\u4F4D\u53F3\u79FB-shr-\u64CD\u4F5C\u7B26-\u548C" tabindex="-1"><a class="header-anchor" href="#\u6309\u4F4D\u53F3\u79FB-shr-\u64CD\u4F5C\u7B26-\u548C" aria-hidden="true">#</a> \u6309\u4F4D\u53F3\u79FB\uFF1ASHR\uFF0C\u64CD\u4F5C\u7B26\uFF1A<code>&gt;&gt;</code>\u548C<code>&gt;&gt;&gt;</code></h3><p><code>&gt;&gt;</code>\uFF1A\u6709\u7B26\u53F7\u4F4D\u4F4D\u79FB\uFF1B\u5404\u4E8C\u8FDB\u4F4D\u5168\u90E8\u53F3\u79FB\u82E5\u5E72\u4F4D\uFF0C\u53F3\u4FA7\u4E22\u5F03\uFF0C\u5DE6\u4FA7\u8865\u7B26\u53F7\u4F4D<br><code>&gt;&gt;&gt;</code>\uFF1A\u65E0\u7B26\u53F7\u4F4D\u4F4D\u79FB\uFF1B\u5404\u4E8C\u8FDB\u4F4D\u5168\u90E8\u53F3\u79FB\u82E5\u5E72\u4F4D\uFF0C\u53F3\u4FA7\u4E22\u5F03\uFF0C\u5DE6\u4FA7\u88650</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>         <span class="token number">57</span>\uFF1A<span class="token number">111001</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token number">57</span> <span class="token operator">&gt;&gt;</span> <span class="token number">1</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
\u8FD0\u7B97\u7ED3\u679C\uFF1A<span class="token number">28</span>\uFF1A<span class="token number">11100</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E00\u4E2A\u7B80\u5355\u7684\u6574\u9664\u5C0F\u6280\u5DE7\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>num <span class="token operator">&gt;&gt;</span> <span class="token number">1</span>    <span class="token comment">// num / 2</span>
num <span class="token operator">&gt;&gt;</span> <span class="token number">2</span>    <span class="token comment">// num / 4</span>
num <span class="token operator">&gt;&gt;</span> <span class="token number">3</span>    <span class="token comment">// num / 8</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4F4D\u8FD0\u7B97\u5728vue3-0\u4E2D\u7684\u5E94\u7528" tabindex="-1"><a class="header-anchor" href="#\u4F4D\u8FD0\u7B97\u5728vue3-0\u4E2D\u7684\u5E94\u7528" aria-hidden="true">#</a> \u4F4D\u8FD0\u7B97\u5728VUE3.0\u4E2D\u7684\u5E94\u7528</h2><p>\u5728vue3.0\u4E2D\uFF0C\u548Cvnode\u5143\u7D20\u76F8\u5173\u7684\u5224\u65AD\u548C\u66F4\u65B0\u4E2D\u5C31\u6709\u5927\u91CF\u5173\u4E8E\u4F4D\u8FD0\u7B97\u7684\u64CD\u4F5C</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// packages/shared/src/shapeFlags.ts</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token keyword">enum</span> ShapeFlags <span class="token punctuation">{</span>
  <span class="token constant">ELEMENT</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token comment">// \u666E\u901AHTML:0000000001</span>
  <span class="token constant">FUNCTIONAL_COMPONENT</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// \u51FD\u6570\u5F0F\u7EC4\u4EF6:0000000010</span>
  <span class="token constant">STATEFUL_COMPONENT</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span>  <span class="token comment">// \u6709\u72B6\u6001\u7EC4\u4EF6:0000000100</span>
  <span class="token constant">TEXT_CHILDREN</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// \u5B50\u8282\u70B9\u4E3A\u7EAF\u6587\u672C:0000001000</span>
  <span class="token constant">ARRAY_CHILDREN</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token comment">// \u5B50\u8282\u70B9\u4E3A\u6570\u7EC4:0000010000</span>
  <span class="token constant">SLOTS_CHILDREN</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// \u5B50\u8282\u70B9\u4E3A\u63D2\u69FD:0000100000</span>
  <span class="token constant">TELEPORT</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token comment">//0001000000</span>
  <span class="token constant">SUSPENSE</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token comment">//0010000000</span>
  <span class="token constant">COMPONENT_SHOULD_KEEP_ALIVE</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token comment">// \u672A\u88AB keep-alive\u7684\u6709\u72B6\u6001\u7EC4\u4EF6:0100000000</span>
  <span class="token constant">COMPONENT_KEPT_ALIVE</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token comment">//  keep-alive\u4E2D\u6709\u72B6\u6001\u7EC4\u4EF6:1000000000</span>
  <span class="token constant">COMPONENT</span> <span class="token operator">=</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">STATEFUL_COMPONENT</span> <span class="token operator">|</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">FUNCTIONAL_COMPONENT</span> <span class="token comment">// \u6709\u72B6\u6001\u548C\u65E0\u72B6\u6001\u7EC4\u4EF6\u7684\u7ED3\u5408\u4F53:0000000110</span>
<span class="token punctuation">}</span>
<span class="token comment">// \u7528\u4E8E\u6807\u8BC6\u8282\u70B9\u66F4\u65B0\u7C7B\u578B\uFF1A packages/shared/src/patchFlags.ts</span>
<span class="token comment">// \u8FD8\u6709\uFF1Apackages/shared/src/slotFlags.ts</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728<code>createVNode</code>\u521B\u5EFA\u8282\u70B9\u65F6\uFF0C\u4F1A\u901A\u8FC7<code>shapeFlag</code>\u6807\u8BB0\u5F53\u524D\u8282\u70B9\u7C7B\u578B\u548C\u5176\u5B50\u8282\u70B9\u7C7B\u578B</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createBaseVNode</span><span class="token punctuation">(</span> <span class="token parameter">type<span class="token punctuation">,</span> children<span class="token punctuation">,</span> patchFlag<span class="token punctuation">,</span> shapeFlag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> children<span class="token punctuation">,</span> patchFlag<span class="token punctuation">,</span> shapeFlag <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u901A\u8FC7\u4F4D\u8FD0\u7B97\u5728shapeFlag\u4E2D\u6DFB\u52A0children\u7684\u7C7B\u578B</span>
        <span class="token comment">//1\u3001  \u5982\u679C\u6807\u7B7E\u88AB\u6807\u8BB0\u4E3Aelement\uFF0C\u5219\u4E8C\u8FDB\u5236\u4E3A\uFF1A  0000000001</span>
        <span class="token comment">//1.1\u3001\u82E5childen\u88AB\u6807\u8BB0\u4E3A\u7EAF\u6587\u672C\uFF0C\u5219\u4E8C\u8FDB\u5236\u53D8\u4E3A\uFF1A0000001001</span>
        <span class="token comment">//1.2\u3001\u82E5childen\u82E5\u6807\u8BB0\u4E3A\u6570\u7EC4\uFF0C\u5219\u4E8C\u8FDB\u5236\u53D8\u4E3A\uFF1A  0000010001</span>
        vnode<span class="token punctuation">.</span>shapeFlag <span class="token operator">=</span> vnode<span class="token punctuation">.</span>shapeFlag <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span> <span class="token operator">?</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">TEXT_CHILDREN</span> <span class="token operator">:</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">ARRAY_CHILDREN</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> vnode
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">_createVNode</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> props<span class="token punctuation">,</span> children</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// \u5982\u679Ctype\u662F\u5B57\u7B26\u4E32\uFF0C\u5C31\u5C06\u5F53\u524D\u8282\u70B9\u5F53\u505Aelement\u8282\u70B9</span>
    <span class="token keyword">const</span> shapeFlag <span class="token operator">=</span> <span class="token function">isString</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">?</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">ELEMENT</span> <span class="token operator">:</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">FUNCTIONAL_COMPONENT</span> <span class="token comment">// \u7B80\u5199\uFF0C\u5B9E\u9645\u5224\u65AD\u4EE5\u539F\u7801\u4E3A\u51C6</span>
    <span class="token keyword">return</span> <span class="token function">createBaseVNode</span><span class="token punctuation">(</span>
        type<span class="token punctuation">,</span>
        children<span class="token punctuation">,</span>
        patchFlag<span class="token punctuation">,</span>
        shapeFlag
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728<code>patch</code>\u9636\u6BB5\uFF0C\u5219\u5C31\u4F1A\u5BF9<code>createVNode</code>\u65F6\u521B\u5EFA\u7684<code>shapeFlag</code>,\u8FDB\u884C\u903B\u8F91\u4E0E\uFF08&amp;\uFF09\u8FD0\u7B97\u6765\u5224\u65AD\u6807\u7B7E\u7C7B\u578B</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">patch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n1<span class="token punctuation">,</span> n2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> shapeFlag <span class="token punctuation">}</span> <span class="token operator">=</span> n2
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token comment">// \u7701\u7565\u9488\u5BF9\u6587\u672C\u3001\u6CE8\u91CA\u3001\u6839\u8282\u70B9\u7B49\u5224\u65AD</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token comment">// \u6839\u636EshapeFlag\u5224\u65AD\u6807\u7B7E\u7C7B\u578B</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>shapeFlag <span class="token operator">&amp;</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">ELEMENT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// \u6253\u5305\u540E\u56DE\u53D8\u6210shapeFlag &amp; 1</span>
                <span class="token function">processElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// \u5904\u7406\u6807\u7B7E\u65F6\u8FD8\u9700\u8981\u5904\u7406\u5176\u5185\u90E8\u5B50\u5143\u7D20</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>shapeFlag <span class="token operator">&amp;</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">COMPONENT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// \u6253\u5305\u540E\u4F1A\u53D8\u6210shapeFlag &amp; 6</span>
                <span class="token function">processComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>shapeFlag <span class="token operator">&amp;</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">TELEPORT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// \u6253\u5305\u540E\u4F1A\u53D8\u6210shapeFlag &amp; 64</span>
                <span class="token punctuation">;</span><span class="token punctuation">(</span>type <span class="token keyword">as</span> <span class="token keyword">typeof</span> TeleportImpl<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>__FEATURE_SUSPENSE__ <span class="token operator">&amp;&amp;</span> shapeFlag <span class="token operator">&amp;</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">SUSPENSE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// \u6253\u5305\u540E\u4F1A\u53D8\u6210shapeFlag &amp; 128</span>
                <span class="token punctuation">;</span><span class="token punctuation">(</span>type <span class="token keyword">as</span> <span class="token keyword">typeof</span> SuspenseImpl<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>processElement</code>\u51FD\u6570\u5219\u4F1A\u8C03\u7528<code>mountElement</code>\u8FDB\u884C\u5143\u7D20\u7684\u521D\u6B21\u6E32\u67D3\u548C\u5185\u90E8\u5B50\u5143\u7D20\u5224\u65AD</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">mountElement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">vnode</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...\u7565</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>shapeFlag <span class="token operator">&amp;</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">TEXT_CHILDREN</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// \u5B50\u5143\u7D20\u662F\u6587\u5B57</span>
        <span class="token function">hostSetElementText</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>children <span class="token keyword">as</span> string<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>shapeFlag <span class="token operator">&amp;</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">ARRAY_CHILDREN</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// \u5B50\u5143\u7D20\u662F\u6570\u7EC4</span>
        <span class="token comment">// mountChildren(vnode.children)</span>
        <span class="token comment">// \u8C03\u7528patch\u5BF9\u5B50\u5143\u7D20\u8FDB\u884C\u91CD\u65B0\u5224\u65AD</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vnode<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token punctuation">(</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> optimized<span class="token operator">?</span> <span class="token function">cloneIfMounted</span><span class="token punctuation">(</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">normalizeVNode</span><span class="token punctuation">(</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">patch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6839\u636E\u4E0A\u9762\u7684\u903B\u8F91\u53EF\u4EE5\u770B\u5230\uFF1A\u5982\u679CshapeFlag\u4E3A<code>0000010001</code>\uFF1B\u5176\u4E0E<code>ShapeFlags.ELEMENT</code>\u548C<code>ShapeFlags.ARRAY_CHILDREN</code>\u8FDB\u884C\u903B\u8F91\u4E0E\u8FD0\u7B97\uFF0C\u5F53\u7ED3\u679C\u90FD\u662F\u975E0\u7684\u503C\uFF0C\u6700\u540E\u5C31\u4F1A\u6210\u529F\u8FDB\u5165<code>patch children</code>\u9636\u6BB5\uFF1B<br> \u5176\u5B9Evue3.0\u5728\u5904\u7406VNode\u8FD9\u79CD\u6700\u5173\u952E\u7684\u6027\u80FD\u635F\u8017\u65B9\u9762\u505A\u4E86\u975E\u5E38\u591A\u7684\u4F18\u5316\uFF0C\u4E8C\u8FDB\u5236\u8FD0\u7B97\u4F18\u5316\u53EA\u662F\u5176\u4E2D\u4E00\u79CD\uFF0C\u4F46\u662F\u5728\u4EE3\u7801\u4E2D\u719F\u7EC3\u8FD0\u7528\u4E8C\u8FDB\u5236\u8FD0\u7B97\uFF0C\u5BF9\u8FD0\u7B97\u590D\u6742\u5EA6\u3001\u903B\u8F91\u5224\u65AD\u3001\u8FD0\u884C\u6027\u80FD\u548C\u4EE3\u7801\u4F53\u79EF\u4E0A\u90FD\u4F1A\u6709\u975E\u5E38\u5927\u7684\u63D0\u5347</p><h2 id="\u901A\u8FC7\u4F4D\u8FD0\u7B97\u5B9E\u73B0\u7B80\u5355\u7684\u6743\u9650\u63A7\u5236\u5224\u65AD" tabindex="-1"><a class="header-anchor" href="#\u901A\u8FC7\u4F4D\u8FD0\u7B97\u5B9E\u73B0\u7B80\u5355\u7684\u6743\u9650\u63A7\u5236\u5224\u65AD" aria-hidden="true">#</a> \u901A\u8FC7\u4F4D\u8FD0\u7B97\u5B9E\u73B0\u7B80\u5355\u7684\u6743\u9650\u63A7\u5236\u5224\u65AD</h2><p>\u5728\u7A0B\u5E8F\u4E2D\uFF0C\u719F\u7EC3\u7684\u4F7F\u7528\u4E8C\u8FDB\u5236\u8FD0\u7B97\u53EF\u4EE5\u51CF\u5C11\u4EE3\u7801\u7684\u903B\u8F91\u5224\u65AD\u3001\u589E\u5F3A\u4EE3\u7801\u6269\u5C55\u6027\u3001\u6613\u4E8E\u5B58\u50A8\u53CA\u63D0\u5347\u6548\u7387\u3002\u800C\u6743\u9650\u5224\u65AD\uFF0C\u7B97\u662F\u6BD4\u8F83\u5E38\u89C1\u7684\u4E00\u79CD\u5E94\u7528\u573A\u666F\uFF0C\u65E0\u8BBA\u662Flinux\u5185\u90E8\u7684\u90E8\u5206\u6743\u9650\u63A7\u5236\u8FD8\u662F\u5927\u578B\u7684\u7BA1\u7406\u7CFB\u7EDF\u90FD\u6709\u975E\u5E38\u591A\u7684\u5B9E\u8DF5\u5E94\u7528\u3002<br> \u5047\u8BBE\u73B0\u5728\u7CFB\u7EDF\u9700\u8981\u4E09\u79CD\u6743\u9650<code>\u589E\u52A0</code>\u3001<code>\u5220\u9664</code>\u3001<code>\u4FEE\u6539</code>\uFF0C\u5219\u6211\u4EEC\u53EA\u9700\u8981\u7528\u4E00\u4E2Anumber\u7C7B\u578B\u7684\u53D8\u91CF\u5C31\u53EF\u4EE5\u63A7\u5236\u6240\u6709\u6743\u9650\u7C7B\u578B\uFF0C\u540C\u65F6\u5728\u5C06\u6743\u9650\u5B58\u50A8\u6570\u636E\u5E93\u65F6\u4E5F\u53EA\u9700\u8981\u5B58\u50A8\u8FD9\u4E00\u4E2A\u53D8\u91CF\u5373\u53EF</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u5B9A\u4E49\u6743\u9650</span>
<span class="token keyword">const</span> <span class="token keyword">enum</span> permissions <span class="token punctuation">{</span>
  <span class="token constant">ADD</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 1</span>
  <span class="token constant">DELETE</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 2</span>
  <span class="token constant">UPDATE</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">2</span> <span class="token comment">// 4</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">userRole</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token literal-property property">roles</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>roles <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">addRole</span><span class="token punctuation">(</span>role<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>roles <span class="token operator">|=</span> role
    <span class="token comment">// \u548C\u4E0A\u9762\u7B49\u4EF7</span>
    <span class="token comment">// if (!this.hasRole(role)) {</span>
    <span class="token comment">//   this.roles += role</span>
    <span class="token comment">// }</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">removeRole</span><span class="token punctuation">(</span>role<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>roles <span class="token operator">&amp;=</span> <span class="token punctuation">(</span><span class="token operator">~</span>role<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u548C\u4E0A\u9762\u7B49\u4EF7</span>
    <span class="token comment">// if (this.hasRole(role)) {</span>
    <span class="token comment">//   this.roles -= role </span>
    <span class="token comment">// }</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// \u6709\u81F3\u5C11\u4E00\u4E2A\u6743\u9650</span>
  <span class="token keyword">public</span> <span class="token function">hasRole</span><span class="token punctuation">(</span>role<span class="token operator">:</span> number <span class="token operator">|</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token literal-property property">roles</span><span class="token operator">:</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> role <span class="token operator">===</span> <span class="token string">&#39;number&#39;</span> <span class="token operator">?</span> <span class="token punctuation">[</span> role <span class="token punctuation">]</span> <span class="token operator">:</span> role
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> roles<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>roles <span class="token operator">&amp;</span> roles<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>    
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// \u6709\u6240\u6709\u6743\u9650</span>
  <span class="token keyword">public</span> <span class="token function">hasBothRole</span><span class="token punctuation">(</span>role<span class="token operator">:</span> number <span class="token operator">|</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token literal-property property">roles</span><span class="token operator">:</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> role <span class="token operator">===</span> <span class="token string">&#39;number&#39;</span> <span class="token operator">?</span> <span class="token punctuation">[</span> role <span class="token punctuation">]</span> <span class="token operator">:</span> role
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> roles<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>roles <span class="token operator">&amp;</span> roles<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>    
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">resetRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>roles <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> myRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">userRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myRole<span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span>permissions<span class="token punctuation">.</span><span class="token constant">ADD</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

myRole<span class="token punctuation">.</span><span class="token function">addRole</span><span class="token punctuation">(</span>permissions<span class="token punctuation">.</span><span class="token constant">ADD</span><span class="token punctuation">)</span>
myRole<span class="token punctuation">.</span><span class="token function">addRole</span><span class="token punctuation">(</span>permissions<span class="token punctuation">.</span><span class="token constant">DELETE</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myRole<span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token punctuation">[</span>permissions<span class="token punctuation">.</span><span class="token constant">ADD</span><span class="token punctuation">,</span> permissions<span class="token punctuation">.</span><span class="token constant">DELETE</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

myRole<span class="token punctuation">.</span><span class="token function">removeRole</span><span class="token punctuation">(</span>permissions<span class="token punctuation">.</span><span class="token constant">DELETE</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myRole<span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token punctuation">[</span>permissions<span class="token punctuation">.</span><span class="token constant">ADD</span><span class="token punctuation">,</span> permissions<span class="token punctuation">.</span><span class="token constant">DELETE</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myRole<span class="token punctuation">.</span><span class="token function">hasBothRole</span><span class="token punctuation">(</span><span class="token punctuation">[</span>permissions<span class="token punctuation">.</span><span class="token constant">ADD</span><span class="token punctuation">,</span> permissions<span class="token punctuation">.</span><span class="token constant">DELETE</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u5C31\u662F\u4E00\u4E2A\u7B80\u5355\u4F7F\u7528\u4E8C\u8FDB\u5236\u8FDB\u884C\u6743\u9650\u5224\u65AD\u7684\u903B\u8F91\uFF0C\u5982\u679C\u5C1D\u8BD5\u4F7F\u7528\u975E\u4E8C\u8FDB\u5236\u5B9E\u73B0\u6B64\u51FD\u6570\u4F1A\u53D1\u73B0\uFF0C\u4E8C\u8FDB\u5236\u65B9\u6848\u5728\u6743\u9650\u5224\u65AD\u65F6\u4F1A\u5C11\u4E00\u4E9B\u903B\u8F91\u5224\u65AD\u548C\u4EE3\u7801\uFF0C\u4EE3\u7801\u6548\u7387\u5C31\u66F4\u4E0D\u7528\u8BF4\u4E86\uFF01</p>`,44);function h(g,f){const e=t("ExternalLinkIcon");return o(),c("div",null,[u,n("p",null,[r,d,k,n("a",m,[v,l(e)])]),b])}const w=p(i,[["render",h],["__file","bit.html.vue"]]);export{w as default};
